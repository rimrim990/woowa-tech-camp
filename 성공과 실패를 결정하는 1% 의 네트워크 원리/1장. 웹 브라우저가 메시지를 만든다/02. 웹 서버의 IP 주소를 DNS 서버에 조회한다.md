# 성공과 실패를 결정하는 1%의 네트워크 원리
## Chapter 01. 웹 브라우저가 메시지를 만든다
### 02. 웹 서버의 IP 주소를 DNS 서버에 조회한다

**IP 주소**
- 브라우저에서 HTTP 메시지를 만들면 이것을 OS 에 의뢰하여 웹 서버에 송신한다
  - 브라우저는 URL 을 해독하여 HTTP 메시지를 만들지만, 메시지를 네트워크에 송출하는 기능은 없음
- OS 에 송신을 의뢰할 때는 도메인 명이 아니라 IP 주소로 메시지를 받을 상대를 지정해야 한다
- IP 주소는 호스트가 속한 서브넷의 `네트워크 번호`와 `호스트 번호`로 구성되어 있다
  - 네트워크는 작은 서브넷을 라우터로 연결하여 전체 네트워크를 완성
  - 송신측이 메시지를 보내면 서브넷 안에 있는 허브가 운반하고, 송신측에 가장 가까운 라우터까지 도착
  - 이후 라우터가 메시지를 보낸 상대를 확인하여 다음 라우터 결정 후 전송 지시
  - 다시 서브넷의 허브가 라우터까지 메시지를 전송, 이를 도착할 때까지 반복

**서브넷 마스크**
- IP 주소는 32비트의 디지털 데이터로, 8비트 (1바이트) 씩 점으로 구분하여 10진수로 표기한다
  - ex) `10.1.2.3`
- IP 주소의 어느 부분이 네트워크 주소이고, 어느 부분이 호스트 주소인지 구분하기 위해 `서브넷 마스크` 를 IP 주소에 덧붙인다
  - ex) `10.11.12.13/24` -> 왼쪽으로부터 24개 bit 가 네트워크 주소
- 호스트 번호가 전부 0인 경우, 서브넷 자체를 나타낸다
  - ex) `10.11.12.0/24`
- 호스트 번호가 모두 1인 경우, 서브넷에 있는 기기 전체에 패킷을 보내는 `브로드캐스트` 를 나타낸다
  - ex) `10.11.12.255/24`

**Socket 라이브러리**
- 가장 가까운 DNS 서버에 요청하여 IP 주소를 알아낼 수 있다
- DNS 서버에 요청을 보내는 클라이언트를 `DNS 리졸버` 라고 한다
- `Socket` 라이브러리 에 포함된 프로그램이 `DNS 리졸버` 역할을 한다
  - `Socket` 라이브러리는 OS 에 포함된 네트워크 기능을 애플리케이션에서 호출하기 위한 기능을 모아놓은 것
- 다음의 코드르 `DNS 리졸버` 를  호출하여 `DNS 서버` 를 통해 IP 주소를 조회할 수 있다
```java
gethostbyname("www.naver.com");
```
- `DNS 리졸버` 도 메시지 송신 동작은 스스로 실행할 수 없기 때문에 OS 에 요청하여 메시지를 전송한다
  - 응답에서 IP 주소를 추출하여 반환한다
- 요청을 보낼 `DNS 서버` 의 IP 주소는 컴퓨터에 미리 설정되어 있다
